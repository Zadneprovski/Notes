[[Виды физической памяти и их отличия]]
# Адресное пространство

Используется одно адресное пространство размером 4GB. Это позволяет упрощать адресацию и управление памятью.
# Распределение памяти в STM32

Рассмотрим пример адресного пространства для микроконтроллера STM32F4xx:

- **FLASH память**:
    - Начальный адрес: 0x08000000
    - Конечный адрес: 0x0807FFFF (512 КБ)
- **System Memory**:
    - Начальный адрес: 0x1FFF0000
    - Конечный адрес: 0x1FFF77FF
- **Option Bytes**:
    - Начальный адрес: 0x1FFFC000
    - Конечный адрес: 0x1FFFC00F
- **RAM (SRAM1)**:
    - Начальный адрес: 0x20000000
    - Конечный адрес: 0x2001FFFF (128 КБ)
- **RAM (SRAM2)**:
    - Начальный адрес: 0x20020000
    - Конечный адрес: 0x2002FFFF (64 КБ)
- **Peripherals**:
    - Начальный адрес: 0x40000000
    - Конечный адрес: 0x500607FF
- **External RAM**:
    - Начальный адрес: 0x60000000
    - Конечный адрес: 0xDFFFFFFF
- **System Control Space**:
    - Начальный адрес: 0xE000E000
    - Конечный адрес: 0xE00FFFFF

# FLASH память

- **Назначение**: FLASH память используется для хранения кода программы (инструкций процессора)  и постоянных данных. 
	- **Код программы (.text)**: Хранится и выполняется непосредственно из FLASH памяти.
	- **Константы (.rodata)**: Хранятся в FLASH памяти.

### Характеристики

1. Энергонезависимость
2. Медленное время записи/стирания: 
	Запись и стирание данных в FLASH происходит медленнее по сравнению с RAM.
3. Ограниченное количество циклов записи/стирания:
    Обычно около 10,000 - 100,000 циклов.

# [[RAM память]]

- **Назначение**: RAM (Random Access Memory) используется для временного хранения данных во время выполнения программы. 

	В оперативной памяти (RAM) размещаются несколько различных сегментов данных, таких как:

	1. **Стек**: Используется для хранения данных вызова функций, локальных переменных и возвратных адресов.
	2. **Сегмент данных (.data)**: Хранит инициализированные глобальные и статические переменные.
	3. **Сегмент BSS (.bss)**: Хранит неинициализированные глобальные и статические переменные, которые инициализируются нулями при запуске.
	4. **Куча** (если не используется, эта память остается свободной): допустим, 0 KB

### Данные `.data` (инициализированные переменные)**:

- В прошивке они хранятся в Flash (в бинарнике они лежат там с начальным значением).
- При старте — в `Reset_Handler()` — они **копируются в RAM**.
- Это нужно, чтобы переменные можно было изменять во время выполнения.

### Данные `.bss` (неинициализированные переменные)**:

- В RAM просто **обнуляются**.
- Это переменные, которые по стандарту C должны начинаться с нуля.

### Характеристики

    Энергозависимость
    Быстрое время доступа
    Неограниченное количество циклов записи/чтения

Регистры используют [[Memory-Mapped I-O (MMIO)]]