## Что это такое?

`#define DBGMCU ((DBGMCU_TypeDef *) DBGMCU_BASE)`

Это макрос из CMSIS/STM32 HAL, который предоставляет доступ к **регистрaм отладочного блока микроконтроллера** (Debug MCU).  
С помощью `DBGMCU` можно управлять тем, **что происходит с периферией, когда отладчик ставит программу на паузу**.

---

## Когда полезно?

Иногда нужно, чтобы **таймеры, UART, и другие модули останавливались**, когда MCU находится в отладке (например, ты поставил breakpoint).  
Без этого таймер может продолжать тикать, что **ломает логику** при отладке.

---

## Как использовать?

Пример: остановить таймер TIM2 при отладке
```c
DBGMCU->APB1FZ |= (1 << 0); // TIM2_STOP
```

- `APB1FZ` — регистр "freeze" для периферии на шине APB1
- `(1 << 0)` — бит, отвечающий за остановку TIM2

Для таймеров на шине APB2 (например, TIM1), используется `DBGMCU->APB2FZ`.

---

## Что можно "заморозить"?

Вот примеры битов (могут отличаться в зависимости от STM32-семейства):

|Регистр|Бит|Назначение|
|---|---|---|
|`APB1FZ`|0|TIM2_STOP|
|`APB1FZ`|1|TIM3_STOP|
|`APB2FZ`|11|TIM1_STOP|
|`CR`|0|Debug Sleep|
|`CR`|1|Debug Stop|
|`CR`|2|Debug Standby|

---

## Когда **не стоит** использовать?

- Когда периферия должна **продолжать работу**, даже во время отладки (например, мотор, UART, RF)
- При отладке реального времени, где **нельзя "замораживать" периферию**
- Если ты работаешь с **внешними устройствами**, которые не знают, что MCU "на паузе"

---

## Лучший способ использовать

Создай функцию инициализации:

```c
void DebugFreezeInit(void) {
    DBGMCU->APB1FZ |= (1 << 0); // TIM2_STOP
    DBGMCU->APB1FZ |= (1 << 1); // TIM3_STOP
    DBGMCU->APB2FZ |= (1 << 11); // TIM1_STOP
}
```

И вызывай её в `main()`, **только в отладочной сборке**:
```c
#ifdef DEBUG
DebugFreezeInit();
#endif
```
