**Pre-commit** — это инструмент, который помогает управлять и автоматизировать использование Git хуков. Он позволяет вам настроить нужные хуки в проекте, скачать и запустить их, а также автоматически установить все нужные зависимости для каждого хука. Преимущество использования `pre-commit` заключается в том, что вам не нужно вручную настраивать хуки или заниматься их установкой — это будет сделано автоматически.

Чтобы закоммитить изменения не вызывая скрипты проверки необходимо выполнить:
```bash
git commit --no-verify -m "Your commit message"
```
### Настроить pre-commit хуки (линтер, black, isort, mypy и poetry)

**Что такое pre-commit хуки?**  
`pre-commit` — это система, которая позволяет запускать автоматические проверки или исправления перед каждым коммитом в git. Это помогает гарантировать, что код в репозитории будет поддерживаться в хорошем состоянии и соответствует стандартам. Например, линтеры помогут находить ошибки в коде, а инструменты форматирования (такие как `black` и `isort`) автоматически приведут код в нужный формат.

**Для чего это нужно?**

- **Автоматизация:** Проверки запускаются автоматически перед каждым коммитом, что устраняет необходимость вручную проверять код.
- **Консистентность:** Убедитесь, что ваш код всегда отформатирован, не содержит ошибок, а импорты упорядочены.
- **Улучшение качества кода:** Инструменты, такие как `mypy`, проверяют типы, что уменьшает количество ошибок во время выполнения.


1. **Установить `pre-commit`:** Сначала установим пакет `pre-commit`:
```
pip install pre-commit
```

2. **Создать конфигурационный файл `.pre-commit-config.yaml`:** В корне проекта создайте файл `.pre-commit-config.yaml` и добавьте в него конфигурацию для хуков:

```yaml
repos:  
  - repo: https://github.com/psf/black-pre-commit-mirror  
    rev: 25.1.0  # версия black  
    hooks:  
      - id: black  
        language_version: python3  
  
  - repo: https://github.com/pycqa/isort  
    rev: 6.0.0  # версия isort  
    hooks:  
      - id: isort  
        language_version: python3  
  
  - repo: https://github.com/pre-commit/mirrors-mypy  
    rev: v1.15.0  # версия mypy  
    hooks:  
      - id: mypy  
        #args: ["--ignore-missing-imports"]  
  
  - repo: https://github.com/PyCQA/flake8  
    rev: 7.1.2  # версия flake8  
    hooks:  
      - id: flake8  
        language_version: python3  
  
#  - repo: https://github.com/python-poetry/poetry  
#    rev: 2.1.1  # версия poetry  
#    hooks:  
#      - id: poetry  
#        name: poetry run lint  
#        entry: poetry run lint  
#        language: system
```

3. **Установить хуки pre-commit:** После того, как вы создали конфигурационный файл, запустите следующую команду для установки хуков:
```bash
pre-commit install
```
Это установит все хуки, указанные в `.pre-commit-config.yaml`.

 
4. **Запуск хуков вручную (при необходимости):** Вы также можете проверить все файлы вручную (например, для проверки перед первым коммитом):
```
pre-commit run --all-files
```

**Что делают инструменты?**

- **`black`** — автоформатирует код в соответствии с установленными правилами стиля.
- **`isort`** — упорядочивает импорты в файле.
- **`flake8`** — проверяет код на ошибки и предупреждения в стиле.
- **`mypy`** — выполняет статический анализ типов.
- **`poetry`** — помогает с управлением зависимостями и выполнением задач, связанных с управлением проектом.