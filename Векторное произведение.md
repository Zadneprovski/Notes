Векторное произведение (или **кросс-произведение**, cross product) — это операция над двумя векторами в 3D-пространстве, результатом которой является **третий вектор, перпендикулярный** к плоскости, образованной этими двумя векторами.

Если у вас есть два вектора $\mathbf{A}$ и $\mathbf{B}$,
то их векторное произведение $\mathbf{A} \times \mathbf{B}$ даёт новый вектор $\mathbf{C}$, который:

1. Перпендикулярен плоскости, содержащей $\mathbf{A}$ и $\mathbf{B}$,.
2. Имеет направление, которое определяется по правилу правой руки: если пальцы правой руки указывают от $\mathbf{A}$ к $\mathbf{B}$, то большой палец укажет направление вектора нормали.
3. Имеет длину, равную площади параллелограмма, образованного векторами A\mathbf{A}A и B\mathbf{B}B.

### Формула векторного произведения:

Для двух векторов $\mathbf{A} = (A_x, A_y, A_z)$ и $\mathbf{B} = (B_x, B_y, B_z)$, векторное произведение вычисляется так:

$$\mathbf{A} \times \mathbf{B} = \left( (A_y B_z - A_z B_y), (A_z B_x - A_x B_z), (A_x B_y - A_y B_x) \right)$$

Этот новый вектор является нормалью к плоскости, в которой лежат $\mathbf{A}$ и $\mathbf{B}$.

### Применение в 3D-графике для расчета нормали:

Допустим, у нас есть три вершины треугольника:

- $P_1 = (x_1, y_1, z_1)$
- $P_2 = (x_2, y_2, z_2)$
- $P_3 = (x_3, y_3, z_3)$

Для расчета нормали к треугольной грани нам нужны два вектора, лежащие в плоскости треугольника. Эти векторы могут быть вычислены как разности между вершинами треугольника:

- Вектор $\mathbf{U} = P_2 - P_1$
- Вектор $\mathbf{V} = P_3 - P_1$

То есть:

$\mathbf{U} = (x_2 - x_1, y_2 - y_1, z_2 - z_1)$
$\mathbf{V} = (x_3 - x_1, y_3 - y_1, z_3 - z_1)$

Теперь мы можем вычислить нормаль $\mathbf{N}$, используя векторное произведение $\mathbf{U} \times \mathbf{V}$:

$\mathbf{N} = \mathbf{U} \times \mathbf{V}$

Вектор нормали $\mathbf{N} = (N_x, N_y, N_z)$ будет иметь компоненты:

$$N_x = (y_2 - y_1) \cdot (z_3 - z_1) - (z_2 - z_1) \cdot (y_3 - y_1) $$
$$N_y = (z_2 - z_1) \cdot (x_3 - x_1) - (x_2 - x_1) \cdot (z_3 - z_1)$$
$$N_z = (x_2 - x_1) \cdot (y_3 - y_1) - (y_2 - y_1) \cdot (x_3 - x_1)$$
Этот вектор будет перпендикулярен плоскости треугольника и, следовательно, является нормалью к треугольной грани.

### Нормализация вектора нормали:

Обычно вектор нормали нужно нормализовать (сделать его длиной 1), чтобы использовать его в расчетах освещения. Это делается следующим образом:

$${длина} = \sqrt{N_x^2 + N_y^2 + N_z^2}$$
$$\mathbf{N}_{\text{нормированная}} = \left( \frac{N_x}{\text{длина}}, \frac{N_y}{\text{длина}}, \frac{N_z}{\text{длина}} \right)$$
Это важно для корректных расчетов освещенности, так как нормализованные нормали позволяют правильно вычислить углы между нормалью и светом.