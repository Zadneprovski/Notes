Концепты (или "concepts") — это механизм в C++20, который позволяет улучшить проверку и документирование требований к типам в шаблонах. Концепты делают код более читаемым и позволяют более явно и строго задавать условия, которым должны удовлетворять типы, используемые в шаблонах.

### Основные идеи концептов

1. **Определение концепта**: Концепт — это логическое условие, которое проверяет, удовлетворяет ли тип определённым требованиям. Концепты позволяют создавать более декларативные требования к типам.
    
2. **Упрощение проверок**: Концепты упрощают работу с шаблонами, позволяя вам явно указывать требования к типам и получать более понятные сообщения об ошибках, когда типы не соответствуют этим требованиям.
    
3. **Улучшение читаемости**: Концепты делают код более читаемым, позволяя описывать требования к типам в виде удобных и понятных условий.
    

### Определение концепта

Концепт определяется с помощью ключевого слова `concept`. Например:

```cpp
#include <concepts>

// Определяем концепт, который проверяет, является ли тип T целым числом
template<typename T>
concept Integral = std::is_integral_v<T>;
```

### Использование концептов

После определения концепта вы можете использовать его для ограничения типов в шаблонах:

```cpp
#include <iostream>
#include <concepts>

// Определяем концепт
template<typename T>
concept Integral = std::is_integral_v<T>;

// Функция, которая принимает только целые числа
void printIntegral(Integral auto value) {
    std::cout << "Integral value: " << value << std::endl;
}

int main() {
    printIntegral(42);    // Работает, так как 42 — целое число
    // printIntegral(3.14); // Ошибка компиляции, так как 3.14 не целое число
}
```

### Комбинирование концептов

Вы можете комбинировать концепты с помощью логических операций:

```cpp
#include <concepts>
#include <type_traits>

// Определяем концепты
template<typename T>
concept Integral = std::is_integral_v<T>;

template<typename T>
concept FloatingPoint = std::is_floating_point_v<T>;

// Концепт, который проверяет, что тип является либо целым числом, либо числом с плавающей точкой
template<typename T>
concept Arithmetic = Integral<T> || FloatingPoint<T>;

void printArithmetic(Arithmetic auto value) {
    std::cout << "Arithmetic value: " << value << std::endl;
}

int main() {
    printArithmetic(42);    // Работает, так как 42 — целое число
    printArithmetic(3.14);  // Работает, так как 3.14 — число с плавающей точкой
    // printArithmetic("Hello"); // Ошибка компиляции, так как строка не является арифметическим типом
}
```

### Проверка требований в шаблонах

Вы также можете использовать концепты для проверки требований внутри шаблонов:

```cpp
#include <concepts>
#include <iostream>

template<typename T>
concept Addable = requires(T a, T b) {
    { a + b } -> std::convertible_to<T>;
};

template<Addable T>
T add(T a, T b) {
    return a + b;
}

int main() {
    std::cout << add(1, 2) << std::endl;        // Работает
    std::cout << add(1.5, 2.5) << std::endl;    // Работает
    // std::cout << add("a", "b") << std::endl; // Ошибка компиляции
}
```
